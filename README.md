
# ๐ค AI Travel Assistant

**AIโฏTravelโฏAssistant** โ ััะพ ัะผะฝัะน Telegramโะฑะพั, ะบะพัะพััะน ะฟะพะผะพะณะฐะตั ะฟะพะดะฑะธัะฐัั ัััั ะธะท ะฑะฐะทัโฏTravelata.  
ะะฝ ะฟะพะฝะธะผะฐะตั ะถะธะฒะพะน ัะตะบัั ะฟะพะปัะทะพะฒะฐัะตะปั (โะฅะพัั ะฒโฏะขัััะธั, ะฟะตัะฒะฐั ะปะธะฝะธั, ะฒััโฏะฒะบะปััะตะฝะพ, ะดะพโฏ1200โฏโฌโ),
ััััะบัััะธััะตั ะทะฐะฟัะพั ัะตัะตะทโฏLLMโฏ(OpenRouter), ัะธะปััััะตั ัััั ะฟะพโฏSQL, ะฐโฏะทะฐัะตะผ
*ัะตะผะฐะฝัะธัะตัะบะธโฏะฟะตัะตัะฐะฝะถะธััะตั (LLMโฏRerank)* ัะตะทัะปััะฐัั ะฟะพโฏัะผััะปั ะพะฟะธัะฐะฝะธะน ะพัะตะปะตะน.

---

## ๐ฅโฏะะตะผะพ

![AIโฏTravelโฏAssistantโฏdemo](demo.gif)

---

## โจโฏะัะฝะพะฒะฝัะตโฏะฒะพะทะผะพะถะฝะพััะธ
- ๐ฌโฏ**ะะฐัััะฐะปัะฝัะน ัะทัะบ.**โฏะะพะปัะทะพะฒะฐัะตะปั ะฟัะพััะพ ะฟะธัะตั, ะบะฐะบ ะตัะปะธ ะฑั ะณะพะฒะพัะธะป ัโฏะฐะณะตะฝัะพะผ;
- ๐งโฏ**LLMโะฟะฐััะตั.**โฏOpenRouterโฏLLM ะฒัะดะตะปัะตั ัััะฐะฝั, ะดะฐัั, ะฑัะดะถะตั,โฏัะธะฟโฏะฟะธัะฐะฝะธั,โฏะฟัะตะดะฟะพััะตะฝะธั;
- ๐โฏ**TravelataโฏAPIโฏ+โฏSQLite.**โฏะะตะฐะปัะฝัะต ัััั ะธโฏะพัะตะปะธ ะบััะธัััััั ะดะปั ะฑััััะพะณะพโฏSQLโะฟะพะธัะบะฐ;
- โก๏ธโฏ**ะะธะฑัะธะดะฝัะนโฏะฟะพะธัะบ.**  
  - *SQLโฏัะธะปัััั*โฏโโฏัััะฐะฝะฐ, ะดะฐัะฐ, ะฝะพัะธ,โฏะฑัะดะถะตั,โฏะฟะธัะฐะฝะธะต;  
  - *LLMโฏRerank*โฏโโฏะฟะตัะตะพัะตะฝะบะฐ ะฟะพโฏัะผััะปัโฏะพะฟะธัะฐะฝะธะน ะพัะตะปะตะน (ัะตัะตะท `llm_service:/similarity`);
- ๐ฃโฏ**ะะฑัััะฝะตะฝะธะต.**โฏะะปั ะบะฐะถะดะพะณะพ ัะตะทัะปััะฐัะฐ ะณะตะฝะตัะธััะตััั ะบะพัะพัะบะพะต ยซะฟะพัะตะผั ะฒัะฑัะฐะฝ ะธะผะตะฝะฝะพโฏััะพัโฏะพัะตะปัยป (ัะตัะตะท `llm_service:/summarize`);
- ๐คโฏ**Telegramโะฑะพั**โฏะฝะฐโฏ`pythonโtelegramโbotโฏv20`.

---

## ๐๏ธโฏะััะธัะตะบัััะฐ

```
ai-travel-bot/
โโโ bot_service/          # Telegramโะฑะพั ะธ ะปะพะณะธะบะฐ ะฟะพะธัะบะฐ
โ   โโโ core.py           # ะพะฑัะฐะฑะพัะบะฐ ะทะฐะฟัะพัะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปั
โ   โโโ tour_search.py    # SQL + LLMโฏRerank + Summarization
โ   โโโ handlers.py       # Telegramโะพะฑัะฐะฑะพััะธะบะธ ัะพะพะฑัะตะฝะธะน
โโโ llm_service/          # FastAPIโัะตัะฒะธั ัโฏOpenRouterโLLM
โ   โโโ main.py           # endpoints /parse /similarity /summarize
โ   โโโ llm_client.py     # ะฝะธะทะบะพััะพะฒะฝะตะฒัะต ะฒัะทะพะฒั OpenRouterโฏAPI
โโโ data/                 # SQLite ะฑะฐะทะฐ ะธ ัะปะพะฒะฐัะธ
โโโ config.yaml           # ัะพะบะตะฝั, ะฟััะธ, ะบะปััะธ LLM
โโโ docker-compose.yaml   # ะฑัััััะน ะทะฐะฟััะบ ะฒ ะดะฒัั ัะตัะฒะธัะฐั
โโโ README.md
```

### ๐โฏะะพัะพะบ ะทะฐะฟัะพัะฐ
1. **ะะพะปัะทะพะฒะฐัะตะปั**โฏะฟะธัะตั:  
   `ะฅะพัั ะฒโฏะขัััะธั ะฒโฏะธัะปะต, 7โฏะฝะพัะตะน, ะฟะตัะฒะฐัโฏะปะธะฝะธั, ะฒััโฏะฒะบะปััะตะฝะพ,โฏ1200โฏโฌ`;
2. **`llm_service:/parse`**โฏัะพะทะดะฐััโฏJSON-ะฟะฐัะฐะผะตััั;
3. **`bot_service/sql_filter()`**โฏะฝะฐัะพะดะธั ะบะฐะฝะดะธะดะฐัะพะฒ ะฒโฏSQLite;
4. **`llm_service:/similarity`**โฏะฒัะฟะพะปะฝัะตั *LLMโฏRerank*: ะพัะตะฝะธะฒะฐะตั ัะผััะปะพะฒัั ััะพะถะตััั
   ะผะตะถะดั ะฟะพะถะตะปะฐะฝะธัะผะธ ะธโฏะพะฟะธัะฐะฝะธะตะผ ะพัะตะปั;
5. **`llm_service:/summarize`**โฏะณะตะฝะตัะธััะตั ะพะฑัััะฝะตะฝะธะต ะฒัะฑะพัะฐ;
6. **Telegramโะฑะพั**โฏะฒะพะทะฒัะฐัะฐะตั ะพั ะฟะพะปัะทะพะฒะฐัะตะปั:
   ```
   ๐จ Sherwood Dreams Resort โ 194โฏ486โฏRUB
   ๐โฏ29โฏะพะบัโฏ2025
   ๐คโฏะัะตะปั ะฝะฐโฏะฟะตัะฒะพะน ะปะธะฝะธะธ, ะฟะธัะฐะฝะธะตโฏUltra AI, ะฟะพะดัะพะดะธั ะดะปั ัะฟะพะบะพะนะฝะพะณะพ ะฟะปัะถะฝะพะณะพโฏะพัะดััะฐ.
   ```

---

## ๐งโฏLLMโฏReranking (SemanticโฏRAG)

**LLMโฏRerank** โ ะบะปััะตะฒะฐั ัะฐััั ะฟะพะธัะบะฐ:

- ะะฐ ะฒัะพะด:  
  *ะพะฟะธัะฐะฝะธั ะพัะตะปะตะน*โฏ(ะธะทโฏ`hotel_descriptions.description`)โฏะธโฏ*ะผัะณะบะธะตโฏะฟัะตะดะฟะพััะตะฝะธั* ะฟะพะปัะทะพะฒะฐัะตะปั;
- ะกะตัะฒะธัโฏ`/similarity`โฏะฒโฏ`llm_service`โฏัะพัะผะธััะตั prompt:  
  > ยซะัะตะฝะธ ััะพะดััะฒะพ ะผะตะถะดั ะฟะพะถะตะปะฐะฝะธัะผะธ ะธโฏะพะฟะธัะฐะฝะธะตะผ ะพัะตะปัโฏโโฏะฒะตัะฝะธโฏัะธัะปะพโฏ0โ1ยป.
- ะะพะปััะตะฝะฝัะนโฏscoreโฏะธัะฟะพะปัะทัะตััั ะดะปัโฏัะพััะธัะพะฒะบะธโฏัะตะทัะปััะฐัะพะฒ (ัะตะผโฏะฒััะต,โฏัะตะผโฏัะตะปะตะฒะฐะฝัะฝะตะต).
- ะขะฐะบะธะผ ะพะฑัะฐะทะพะผ, ัะธััะตะผะฐ ะฝะต ะฟัะพััะพ ัะธะปััััะตั, ะฝะพ ะธโฏะฟะพะฝะธะผะฐะตัโฏัะผััะป ะทะฐะฟัะพัะฐ:
  *"ะฑะฐั ัโฏะผะพัั",โฏ"ะฟะตัะฒะฐัโฏะปะธะฝะธั",โฏ"ะดะปัโฏะดะตัะตะน"โฏะธโฏั.ะฟ.*

---

## ๐ณโฏะัััััะนโฏััะฐัั

```bash
git clone https://github.com/yourname/ai-travel-bot.git
cd ai-travel-bot

# ะพััะตะดะฐะบัะธััะนัะต config.yaml (Telegram token, OpenRouter APIโkey)
docker-compose up --build
```

ะะพัะปะต ัะฑะพัะบะธ:
- ะะพั ะฑัะดะตั ะดะพัััะฟะตะฝ ะบะฐะบโฏ`bot-service`,  
- LLMโัะตัะฒะธัโฏะฝะฐโฏ`http://localhost:8001`.

---

## โ๏ธโฏconfig.yamlโฏะฟัะธะผะตั

```yaml
telegram:
  token: "YOUR_TELEGRAM_BOT_TOKEN"

travelata:
  base_url: "https://api-gateway.travelata.ru"
  token: "YOUR_TRAVELATA_TOKEN"

database:
  path: "data/travelata.db"

llm:
  api_key: "sk-your-openrouter-key"
  model: "mistralai/mixtral-8x7b"

llm_service:
  url_parse: "http://llm-service:8001/parse"
  url_similarity: "http://llm-service:8001/similarity"
  url_summarize: "http://llm-service:8001/summarize"
```

---

## ๐งญโฏะะพะผะฐะฝะดั Docker

| ะะฟะตัะฐัะธั | ะะพะผะฐะฝะดะฐ |
|-----------|----------|
| ะกะฑะพัะบะฐ ะธโฏะทะฐะฟััะบ | `docker-compose upโฏ--build` |
| ะัะพัะผะพัั ะปะพะณะพะฒ | `docker-compose logsโฏ-fโฏbot-service` |
| ะะพะดะบะปััะธัััั ะบโฏะะ | `docker exec -it bot-service sqlite3 /data/travelata.db` |
| ะัะธััะธัั | `docker-compose downโฏ-v` |

---

## ๐โฏะะฐะทะฒะธัะธะต ะฟัะพะตะบัะฐ
- [ ]โฏะะพะฑะฐะฒะธัั ะบัั ะพัะบััััั embeddingโะพะฒ (FastAPI memoryโฏ/โฏRedis);  
- [ ]โฏะะพะดะดะตัะถะบะฐ ะฝะตัะบะพะปัะบะธั ะธััะพัะฝะธะบะพะฒโฏ(Travelata,โฏExpedia,โฏAviasales);  
- [ ]โฏะะตะนัะธะฝะณ ะบะฐัะตััะฒะฐ LLMโrerank (ะผะตััะธะบะธโฏnDCGโฏ/โฏMRR);  
- [ ]โฏWebโะธะฝัะตััะตะนั (Streamlitโฏ/โฏReact)โฏะดะปัโฏะดะตะผะพ.

---

## ๐งพโฏะะธัะตะฝะทะธั
MIT License  

---

### ๐โฏะะฐัะปะธ ะพัะธะฑะบั?
ะัะธััะปะฐะนัะตโฏPR ะธะปะธ ัะพะทะดะฐะนัะตโฏIssue โโฏะฑัะดะตะผ ัะฐะดั ัะดะตะปะฐััโฏะฑะพัะฐ ะตััโฏัะผะฝะตะต ๐
